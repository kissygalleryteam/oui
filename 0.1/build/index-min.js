/*! oui - v0.1 - 2013-09-05 10:35:51 AM
* Copyright (c) 2013 goto100; Licensed  */
KISSY.add("gallery/oui/0.1/handler",function(a,b){var c=b.Class,d=new c({handleNew:function(){},handleMeta:function(){},handleMember:function(){},handleInitialize:function(){}});return d},{requires:["../oop/index"]}),KISSY.add("gallery/oui/0.1/schemas/options",function(a,b,c){function d(a){var c=b.property(function(){return this.getOption(c.__name__)||a},function(a){this.setOption(c.__name__,a)});return c.uitype=arguments.callee,c}var e=new b.Class(c,{handleNew:function(a,b,c,d){d.getOption=this.getOption,d.setOption=this.setOption},setOption:function(a,b){self["__"+a]=b},getOption:function(a){return self["__"+a]}});return{option:d,OptionsHandler:e}},{requires:["../../oop/index","../handler"]}),KISSY.add("gallery/oui/0.1/schemas/accessors",function(a,b){function c(a,c){var d=b.property(function(){return this.node.one(a)});return d.uitype=arguments.callee,d.selector=a,d.options=c,d}function d(a,c){var d=b.property(function(){return this.node.all(a)});return d.uitype=arguments.callee,d.selector=a,d.options=c,d}return b.Class,{define1:c,define:d}},{requires:["../../oop/index","../handler"]}),KISSY.add("gallery/oui/0.1/schemas/promise",function(a,b){function c(a){return function(){var c=new b.Defer,d=Array.prototype.slice.call(arguments,0);return d.push(c.resolve.bind(c)),a.apply(this,d),c.promise}}return{promise:c}},{requires:["promise"]}),KISSY.add("gallery/oui/0.1/schemas/data",function(a,b,c,d,e,f){function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(){if(j)return j;var b="components/ui/schemas/time";if(~Object.keys(a.Env.mods).indexOf(b)){if(a.Env.mods[b].value)return j=a.Env.mods[b].value;throw"time module not loaded"}throw"time module not required, please add dependency: "+b}function i(a){var c=b.property(function(){return this["_"+c.__name__]},function(a){this["_"+c.__name__]=a});return c.uitype=arguments.callee,c.options=a,c}var j,k=b.Class,l=new k(c,{handleMember:function(a,c,j){if(j&&j.__class__==b.property&&j.uitype==i){var k,l="load"+g(c),m=j.options,n=function(a,b){var c={url:m.api,jsonp:m.jsonp,type:m.method,dataType:m.dataType,scriptCharset:m.scriptCharset,data:f.to_html(m.data,a),success:b};e(c)};m.debounce&&(k=h(),n=k.debounce(m.debounce,m.immediate)(n)),m.throttle&&(k=h(),n=k.throttle(m.throttle)(n)),a.__setattr__(l,d.promise(n))}}});return{data:i,DataHandler:l}},{requires:["../../oop/index","../handler","./promise","ajax","brix/gallery/mu/index"]}),KISSY.add("gallery/oui/0.1/schemas/events",function(a,b,c,d,e){var f=b.Class,g=new f(c,{handleNew:function(a,b,c,d){d.meta.bindEvents=[]},handleMember:function(a,b){b.match(/^on(.*)/)&&a.meta.bindEvents.push({name:RegExp.$1,method:b})},handleInitialize:function(a){a.meta.bindEvents.forEach(function(b){a.node.on(b.name,a[b.method].bind(a))})}}),h=new f(c,{handleNew:function(a,b,c,d){d.meta.subEvents=[]},handleMember:function(a,b,c){c&&(c.uitype==d.define||c.uitype==d.define1)&&c.options&&c.options.bind?Object.keys(c.options.bind).forEach(function(d){var e=c.options.bind[d].split(/\s*,\s*/);a.meta.subEvents.push({sub:b,name:d,func:function(b){var c=this;e.forEach(function(d){var e=d.match(/^(.*?)(?:\((.*)\))?$/),f=e[1],g=e[2],h=[];g&&("$event"==g?h.push(b):"$target"==g&&h.push(b.target)),a.prototype[f].apply(c,h)})}})}):b.match(/^(.+)_on(.+)$/)&&a.meta.subEvents.push({sub:RegExp.$1,name:RegExp.$2,method:b})},handleInitialize:function(a){a.meta.subEvents.forEach(function(b){var c=a.__properties__[b.sub].selector;~["blur","valuechange"].indexOf(b.name)?e.on(c,b.name,function(c){b.method?a[b.method](c):b.func&&b.func.call(a,c)},a.node):e.delegate(a.node,b.name,c,function(c){b.method?a[b.method](c):b.func&&b.func.call(a,c)})})}});return{BindEventHandler:g,SubEventHandler:h}},{requires:["../../oop/index","../handler","./accessors","event"]}),KISSY.add("gallery/oui/0.1/schemas/factory",function(a,b,c,d,e,f){var g=b.Class,h=new g(c,{handleMember:function(a,b,c){if("__factory"==b){var g=c.meta;g.data&&g.data.forEach(function(b){a.__setattr__(b,d.data(c[b]))}),g.define&&g.define.forEach(function(b){a.__setattr__(b,e.define(c[b].selector,c[b]))}),g.define1&&g.define1.forEach(function(b){a.__setattr__(b,e.define1(c[b].selector,c[b]))}),g.options&&g.options.forEach(function(b){a.__setattr__(b,f.option(c[b]))})}},handleInitialize:function(a){var b=a.__factory;!b}});return{FactoryHandler:h}},{requires:["../../oop/index","../handler","./data","./accessors","./options"]}),KISSY.add("gallery/oui/0.1/index",function(a,b,c,d,e,f,g,h,i,j,k){function l(){}var m=d.Class,n=new m(d.Type,{__new__:function(a,b,c,e){var f,g={};return e.uses?(f=[],e.uses.forEach(function(a){f.push(new a)}),e.handlers=f):f=c.handlers,e.meta=g,e.__constructed=!1,f.forEach(function(d){d.handleNew(a,b,c,e)}),d.Type.__new__(a,b,c,e)},initialize:function(a,b,c){var d=this;d.__constructed=!0,d.handlers&&Object.keys(c).forEach(function(a){var b=c[a];d.handlers.forEach(function(c){c.handleMember(d,a,b)})})},__setattr__:function(a,b){var c=this;d.Type.prototype.__setattr__.call(c,a,b),c.__constructed&&c.handlers&&c.handlers.forEach(function(d){d.handleMember(c,a,b)})}});l.prototype=b.Target;var o=new m({__metaclass__:n,__mixins__:[l],uses:[f.OptionsHandler,i.BindEventHandler,i.SubEventHandler,h.DataHandler,k.FactoryHandler],initialize:function(a){this.node=a,this.handlers.forEach(function(a){a.handleInitialize(this)},this)},render:j.promise(function(b,d,f){var g=a.one(this.__properties__[b].options["template-from"]),h=g.html(),i=e.to_html(h,d);g?c.insertBefore(a.one(i),g):this.node.append(i),f()})}),p={};return p.Component=o,p.option=f.option,p.define1=g.define1,p.define=g.define,p.data=h.data,p},{requires:["event","dom","../oop/index","brix/gallery/mu/index","./schemas/options","./schemas/accessors","./schemas/data","./schemas/events","./schemas/promise","./schemas/factory"]});